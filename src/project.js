window.__require=function e(t,a,i){function o(n,s){if(!a[n]){if(!t[n]){var h=n.split("/");if(h=h[h.length-1],!t[h]){var c="function"==typeof __require&&__require;if(!s&&c)return c(h,!0);if(r)return r(h,!0);throw new Error("Cannot find module '"+n+"'")}}var d=a[n]={exports:{}};t[n][0].call(d.exports,function(e){return o(t[n][1][e]||e)},d,d.exports,e,t,a,i)}return a[n].exports}for(var r="function"==typeof __require&&__require,n=0;n<i.length;n++)o(i[n]);return o}({BoardItemManager:[function(e,t,a){"use strict";cc._RF.push(t,"c3a58uF/vlCD4EwBc4mWolp","BoardItemManager");cc.Class({extends:cc.Component,properties:{},start:function(){},update:function(e){var t=this.node.getChildByName("text").getComponent(cc.Label);t.node.width>.9*D.gameManager.board_item_size&&(t.lineHeight=t.node.getContentSize().height/t.node.getContentSize().width*D.gameManager.board_item_size*.9,t.fontSize=t.lineHeight)},init:function(e,t,a,i){var o=this.getSingleColor(a),r=this.getSingleBackgroundColor(a);this.graphics=this.node.getComponent(cc.Graphics),this.graphics.fillColor=r,this.node.x=D.gameManager.board_line_width+(D.gameManager.board_line_width+D.gameManager.board_item_size)*t,this.node.y=D.gameManager.board_line_width+(D.gameManager.board_line_width+D.gameManager.board_item_size)*e,this.graphics.roundRect(0,0,D.gameManager.board_item_size,D.gameManager.board_item_size,D.gameManager.common_radius),this.graphics.fill(),this.node.width=D.gameManager.board_item_size,this.node.height=D.gameManager.board_item_size;var n=this.node.getChildByName("text").getComponent(cc.Label);if(n.string=a,n.node.color=o,n.node.getComponent(cc.LabelOutline).color=o,n.lineHeight=.6*D.gameManager.board_item_size,n.fontSize=n.lineHeight,i){var s=cc.sequence(cc.scaleTo(.03,1.1),cc.scaleTo(.03,1));this.node.runAction(s)}},getSingleColor:function(e){switch(e){case 0:return cc.color(238,228,218,89);case 2:case 4:return cc.Color.WHITE.fromHEX("#746d63");default:return cc.Color.WHITE}},getSingleBackgroundColor:function(e){switch(e){case 0:return cc.color(238,228,218,89);case 2:return cc.Color.WHITE.fromHEX("#eee4da");case 4:return cc.Color.WHITE.fromHEX("#ebdcc5");case 8:return cc.Color.WHITE.fromHEX("#f5b27b");case 16:return cc.Color.WHITE.fromHEX("#f69664");case 32:return cc.Color.WHITE.fromHEX("#f77f5d");case 64:return cc.Color.WHITE.fromHEX("#f55c3c");default:var t=e/Math.pow(2,20),a=parseInt(parseInt("f5",16)*t+parseInt("ed",16)*(1-t)),i=parseInt(parseInt("5c",16)*t+parseInt("c2",16)*(1-t)),o=parseInt(parseInt("3c",16)*t+parseInt("2e",16)*(1-t));return cc.color(a,i,o,255)}},moveRight:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments[2],i=cc.moveBy(.03*e,cc.v2((D.gameManager.board_line_width+D.gameManager.board_item_size)*e,0)),o={isDone:!1},r=cc.callFunc(function(){t&&(this.node.destroy(),t(a)),o.isDone=!0},this);this.node.runAction(cc.sequence(i,r)),D.preActions.push(o),D.isCanListenActions=!0},moveLeft:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments[2],i=cc.moveBy(.03*e,cc.v2(-(D.gameManager.board_line_width+D.gameManager.board_item_size)*e,0)),o={isDone:!1},r=cc.callFunc(function(){t&&(this.node.destroy(),t(a)),o.isDone=!0},this);this.node.runAction(cc.sequence(i,r)),D.preActions.push(o),D.isCanListenActions=!0},moveUp:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments[2],i=cc.moveBy(.03*e,cc.v2(0,(D.gameManager.board_line_width+D.gameManager.board_item_size)*e)),o={isDone:!1},r=cc.callFunc(function(){t&&(this.node.destroy(),t(a)),o.isDone=!0},this);this.node.runAction(cc.sequence(i,r)),D.preActions.push(o),D.isCanListenActions=!0},moveDown:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments[2],i=cc.moveBy(.03*e,cc.v2(0,-(D.gameManager.board_line_width+D.gameManager.board_item_size)*e)),o={isDone:!1},r=cc.callFunc(function(){t&&(this.node.destroy(),t(a)),o.isDone=!0},this);this.node.runAction(cc.sequence(i,r)),D.preActions.push(o),D.isCanListenActions=!0},combine:function(e){var t=this.getSingleColor(e),a=this.getSingleBackgroundColor(e);this.graphics.clear(),this.graphics.fillColor=a,this.graphics.roundRect(0,0,D.gameManager.board_item_size,D.gameManager.board_item_size,D.gameManager.common_radius),this.graphics.fill();var i=this.node.getChildByName("text").getComponent(cc.Label);i.string=e,i.node.color=t,i.node.getComponent(cc.LabelOutline).color=t;var o={isDone:!1},r=cc.callFunc(function(){o.isDone=!0,D.isCanListenActions=!0},this),n=cc.sequence(cc.scaleTo(.03,1.1),cc.scaleTo(.03,1),r);this.node.runAction(n),D.preActions.push(o)}}),cc._RF.pop()},{}],BoardManager:[function(e,t,a){"use strict";cc._RF.push(t,"ab26epEf0xP0pFqIKIMDXz6","BoardManager");cc.winSize;var i=0,o=1,r=2,n=3,s=i;cc.Class({extends:cc.Component,properties:{boardItemPrefabs:{default:null,type:cc.Prefab}},onLoad:function(){},start:function(){},update:function(e){if(D.isCanListenActions&&D.actionEndCallback&&D.preActions&&D.preActions.length){for(var t=0;t<D.preActions.length;t++){var a=D.preActions[t];if(a&&!a.isDone)return}var i=D.actionEndCallback;D.actionEndCallback=null,D.preActions=[],D.isCanListenActions=!1,i()}},init:function(e,t){if(this.boardH=e,this.boardV=t,this.board_list=[],this.board_nums=cc.sys.localStorage.getItem("board"),this.board_nums=this.board_nums?JSON.parse(this.board_nums):[],this.addScore=0,this.initBg(),this.board_nums&&this.board_nums.length)for(var a=0;a<this.board_nums.length;a++)this.drawSingle(a,this.board_nums[a],!1);else this.randomItem(2,!1);this.registerListener()},registerListener:function(){console.log("registerListener"),this.node.on(cc.Node.EventType.TOUCH_START,this.touchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.touchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.touchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.touchEnd,this)},touchStart:function(e){},touchMove:function(e){},touchEnd:function(e){if(D.canTouch){var t=e.getLocationX()-e.getStartLocation().x,a=e.getLocationY()-e.getStartLocation().y;if(Math.abs(t)>Math.abs(a)){if(s=t>0?r:i,Math.abs(t)<.1*D.gameManager.board_item_size)return}else if(s=a>0?o:n,Math.abs(a)<.1*D.gameManager.board_item_size)return;this.calMoveResult()}},initBg:function(){this.bgGraphics=this.node.getComponent(cc.Graphics),this.node.x=D.gameManager.board_start_x,this.node.y=D.gameManager.board_start_y,this.bgGraphics.roundRect(0,0,D.gameManager.board_size,D.gameManager.board_size,D.gameManager.common_radius),this.bgGraphics.fill(),this.node.width=D.gameManager.board_size,this.node.height=D.gameManager.board_size,this.bgGraphics.fillColor=cc.color(238,228,218,89);for(var e=0;e<this.boardV;e++)for(var t=0;t<this.boardH;t++)this.bgGraphics.roundRect(D.gameManager.board_line_width+(D.gameManager.board_line_width+D.gameManager.board_item_size)*t,D.gameManager.board_line_width+(D.gameManager.board_line_width+D.gameManager.board_item_size)*e,D.gameManager.board_item_size,D.gameManager.board_item_size,D.gameManager.common_radius),this.bgGraphics.fill()},randomItem:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!(this.getBoardItemCount()>=this.boardH*this.boardV))for(;;){var a=parseInt(Math.random()*this.boardH*this.boardV);if(!this.board_list||!this.board_list[a]||!this.board_list[a].number||isNaN(this.board_list[a].number)){var i=Math.pow(2,parseInt(2*Math.random())+1);this.drawSingle(a,i,t),e>1&&this.randomItem(e-1,t);break}}},getBoardItemCount:function(){var e=[];if(this.board_list)for(var t in this.board_list)this.board_list.hasOwnProperty(t)&&this.board_list[t]&&!isNaN(this.board_list[t].number)&&this.board_list[t].number&&e.push(t);return e.length},drawSingle:function(e,t,a){if(!isNaN(t)&&t){var i=Math.floor(e/this.boardH),o=e%this.boardH,r=cc.instantiate(this.boardItemPrefabs);this.node.addChild(r),r.getComponent("BoardItemManager").init(i,o,t,a),this.board_list[e]={index:e,number:t,node:r};var n=this.board_list.map(function(e){return e?e.number:0});cc.sys.localStorage.setItem("board",JSON.stringify(n))}},calMoveResult:function(){var e=this,t=0;D.canTouch=!1,t+=this.clearNullInBoard(function(){var a=e.moveItemInBoard();D.actionEndCallback=function(){t?(e.addScore&&(D.gameManager.refreshScore(e.addScore),e.addScore=0),setTimeout(function(){e.randomItem(1,!0),D.canTouch=!0},50)):e.getBoardItemCount()>=e.boardH*e.boardV?D.gameManager.showGameOver():D.canTouch=!0},a?(t+=a,t+=e.clearNullInBoard()):(D.preActions.push({isDone:!0}),D.isCanListenActions=!0)})},clearNullInBoard:function(e){e&&(D.actionEndCallback=e);var t=0;switch(s){case i:for(var a=0;a<this.boardV;a++)for(var h=0;h<this.boardH-1;h++)if(!this.board_list[this.boardH*a+h]||isNaN(this.board_list[this.boardH*a+h].number)||!this.board_list[this.boardH*a+h].number)for(var c=h+1;c<this.boardH;c++)if(this.board_list[this.boardH*a+c]&&!isNaN(this.board_list[this.boardH*a+c].number)&&this.board_list[this.boardH*a+c].number){this.board_list[this.boardH*a+h]=this.board_list[this.boardH*a+c],this.board_list[this.boardH*a+h].index=this.boardH*a+h,this.board_list[this.boardH*a+c]=null,this.board_list[this.boardH*a+h].node.getComponent("BoardItemManager").moveLeft(Math.abs(c-h)),t++;break}break;case r:for(a=0;a<this.boardV;a++)for(h=this.boardH-1;h>0;h--)if(!this.board_list[this.boardH*a+h]||isNaN(this.board_list[this.boardH*a+h].number)||!this.board_list[this.boardH*a+h].number)for(c=h-1;c>=0;c--)if(this.board_list[this.boardH*a+c]&&!isNaN(this.board_list[this.boardH*a+c].number)&&this.board_list[this.boardH*a+c].number){this.board_list[this.boardH*a+h]=this.board_list[this.boardH*a+c],this.board_list[this.boardH*a+h].index=this.boardH*a+h,this.board_list[this.boardH*a+c]=null,this.board_list[this.boardH*a+h].node.getComponent("BoardItemManager").moveRight(Math.abs(c-h)),t++;break}break;case o:for(a=0;a<this.boardH;a++)for(h=this.boardV-1;h>0;h--)if(!this.board_list[this.boardH*h+a]||isNaN(this.board_list[this.boardH*h+a].number)||!this.board_list[this.boardH*h+a].number)for(c=h-1;c>=0;c--)if(this.board_list[this.boardH*c+a]&&!isNaN(this.board_list[this.boardH*c+a].number)&&this.board_list[this.boardH*c+a].number){this.board_list[this.boardH*h+a]=this.board_list[this.boardH*c+a],this.board_list[this.boardH*h+a].index=this.boardH*h+a,this.board_list[this.boardH*c+a]=null,this.board_list[this.boardH*h+a].node.getComponent("BoardItemManager").moveUp(Math.abs(h-c)),t++;break}break;case n:for(a=0;a<this.boardH;a++)for(h=0;h<this.boardV-1;h++)if(!this.board_list[this.boardH*h+a]||isNaN(this.board_list[this.boardH*h+a].number)||!this.board_list[this.boardH*h+a].number)for(c=h+1;c<this.boardV;c++)if(this.board_list[this.boardH*c+a]&&!isNaN(this.board_list[this.boardH*c+a].number)&&this.board_list[this.boardH*c+a].number){this.board_list[this.boardH*h+a]=this.board_list[this.boardH*c+a],this.board_list[this.boardH*h+a].index=this.boardH*h+a,this.board_list[this.boardH*c+a]=null,this.board_list[this.boardH*h+a].node.getComponent("BoardItemManager").moveDown(Math.abs(h-c)),t++;break}}return t||(D.preActions.push({isDone:!0}),D.isCanListenActions=!0),t},moveItemInBoard:function(e){var t=this,a=0;switch(s){case i:for(var h=0;h<this.boardV;h++)for(var c=0;c<this.boardH-1;c++)if(this.board_list[this.boardH*h+c]&&this.board_list[this.boardH*h+c+1]&&this.board_list[this.boardH*h+c].number==this.board_list[this.boardH*h+c+1].number){this.board_list[this.boardH*h+c].number*=2;this.board_list[this.boardH*h+c+1].node.getComponent("BoardItemManager").moveLeft(1,function(e){t.board_list[e.index].node.getComponent("BoardItemManager").combine(e.number)},this.board_list[this.boardH*h+c]),this.board_list[this.boardH*h+c+1]=null,a++,this.addScore+=this.board_list[this.boardH*h+c].number}break;case r:for(h=0;h<this.boardV;h++)for(c=this.boardH-1;c>0;c--)if(this.board_list[this.boardH*h+c]&&this.board_list[this.boardH*h+c-1]&&this.board_list[this.boardH*h+c].number==this.board_list[this.boardH*h+c-1].number){this.board_list[this.boardH*h+c].number*=2;this.board_list[this.boardH*h+c-1].node.getComponent("BoardItemManager").moveRight(1,function(e){t.board_list[e.index].node.getComponent("BoardItemManager").combine(e.number)},this.board_list[this.boardH*h+c]),this.board_list[this.boardH*h+c-1]=null,a++,this.addScore+=this.board_list[this.boardH*h+c].number}break;case o:for(h=0;h<this.boardH;h++)for(c=this.boardV-1;c>0;c--)if(this.board_list[this.boardH*c+h]&&this.board_list[this.boardH*(c-1)+h]&&this.board_list[this.boardH*c+h].number==this.board_list[this.boardH*(c-1)+h].number){this.board_list[this.boardH*c+h].number*=2;this.board_list[this.boardH*(c-1)+h].node.getComponent("BoardItemManager").moveUp(1,function(e){t.board_list[e.index].node.getComponent("BoardItemManager").combine(e.number)},this.board_list[this.boardH*c+h]),this.board_list[this.boardH*(c-1)+h]=null,a++,this.addScore+=this.board_list[this.boardH*c+h].number}break;case n:for(h=0;h<this.boardH;h++)for(c=0;c<this.boardV-1;c++)if(this.board_list[this.boardH*c+h]&&this.board_list[this.boardH*(c+1)+h]&&this.board_list[this.boardH*c+h].number==this.board_list[this.boardH*(c+1)+h].number){this.board_list[this.boardH*c+h].number*=2;this.board_list[this.boardH*(c+1)+h].node.getComponent("BoardItemManager").moveDown(1,function(e){t.board_list[e.index].node.getComponent("BoardItemManager").combine(e.number)},this.board_list[this.boardH*c+h]),this.board_list[this.boardH*(c+1)+h]=null,a++,this.addScore+=this.board_list[this.boardH*c+h].number}}return a}}),cc._RF.pop()},{}],ContainerManager:[function(e,t,a){"use strict";cc._RF.push(t,"ee1ac4fdd9K1LNkA/791FTR","ContainerManager");var i=cc.winSize;cc.Class({extends:cc.Component,properties:{gameNameNode:{default:null,type:cc.Node},currentScoreNode:{default:null,type:cc.Node},greatScoreNode:{default:null,type:cc.Node},restartNode:{default:null,type:cc.Node},boardNode:{default:null,type:cc.Node}},onLoad:function(){D.containerManager=this,this.restartNode.on(cc.Node.EventType.TOUCH_START,function(){D.gameManager.popupWindowNode.getComponent("PopupWindowManager").show()},this)},start:function(){},update:function(e){var t=this.currentScoreNode.getChildByName("score").getComponent(cc.Label);t.node.width>.9*D.gameManager.head_score_back_width&&(t.lineHeight=t.node.getContentSize().height/t.node.getContentSize().width*D.gameManager.head_score_back_width*.9,t.fontSize=t.lineHeight);var a=this.greatScoreNode.getChildByName("score").getComponent(cc.Label);a.node.width>.9*D.gameManager.head_score_back_width&&(a.lineHeight=a.node.getContentSize().height/a.node.getContentSize().width*D.gameManager.head_score_back_width*.9,a.fontSize=a.lineHeight)},init:function(e,t){this.initHead(),this.boardNode.getComponent("BoardManager").init(e,t)},initHead:function(){var e=this.gameNameNode.getComponent(cc.Graphics);this.gameNameNode.x=D.gameManager.screen_padding_left_and_right,this.gameNameNode.y=i.height-D.gameManager.screen_padding_top-D.gameManager.head_height,e.roundRect(0,0,D.gameManager.head_2048_width,D.gameManager.head_height,D.gameManager.common_radius),e.fill(),this.gameNameNode.width=D.gameManager.head_2048_width,this.gameNameNode.height=D.gameManager.head_height;var t=this.gameNameNode.getChildByName("text").getComponent(cc.Label);t.lineHeight=D.gameManager.head_height,t.fontSize=t.node.getContentSize().height/t.node.getContentSize().width*D.gameManager.head_height*.7;var a=this.currentScoreNode.getComponent(cc.Graphics);this.currentScoreNode.x=2*D.gameManager.screen_padding_left_and_right+D.gameManager.head_2048_width,this.currentScoreNode.y=i.height-D.gameManager.screen_padding_top-D.gameManager.head_score_back_height,a.roundRect(0,0,D.gameManager.head_score_back_width,D.gameManager.head_score_back_height,D.gameManager.common_radius),a.fill(),this.currentScoreNode.width=D.gameManager.head_score_back_width,this.currentScoreNode.height=D.gameManager.head_score_back_height;var o=this.currentScoreNode.getChildByName("desc").getComponent(cc.Label);o.fontSize=o.node.getContentSize().height/o.node.getContentSize().width*D.gameManager.head_score_back_width*.6,o.lineHeight=o.fontSize/.9,o.node.y=.85*D.gameManager.head_score_back_height-o.lineHeight/2;var r=this.currentScoreNode.getChildByName("score").getComponent(cc.Label);r.lineHeight=.65*D.gameManager.head_score_back_height-o.lineHeight,r.fontSize=r.lineHeight,r.node.y=(.85*D.gameManager.head_score_back_height-o.lineHeight)/2;var n=this.greatScoreNode.getComponent(cc.Graphics);this.greatScoreNode.x=3*D.gameManager.screen_padding_left_and_right+D.gameManager.head_2048_width+D.gameManager.head_score_back_width,this.greatScoreNode.y=i.height-D.gameManager.screen_padding_top-D.gameManager.head_score_back_height,n.roundRect(0,0,D.gameManager.head_score_back_width,D.gameManager.head_score_back_height,D.gameManager.common_radius),n.fill(),this.greatScoreNode.width=D.gameManager.head_score_back_width,this.greatScoreNode.height=D.gameManager.head_score_back_height;var s=this.greatScoreNode.getChildByName("desc").getComponent(cc.Label);s.fontSize=s.node.getContentSize().height/s.node.getContentSize().width*D.gameManager.head_score_back_width*.6,s.lineHeight=s.fontSize/.9,s.node.y=.85*D.gameManager.head_score_back_height-s.lineHeight/2;var h=this.greatScoreNode.getChildByName("score").getComponent(cc.Label);h.lineHeight=.65*D.gameManager.head_score_back_height-s.lineHeight,h.fontSize=h.lineHeight,h.node.y=(.85*D.gameManager.head_score_back_height-o.lineHeight)/2;var c=this.restartNode.getComponent(cc.Graphics);this.restartNode.x=2*D.gameManager.screen_padding_left_and_right+D.gameManager.head_2048_width,this.restartNode.y=i.height-D.gameManager.screen_padding_top-D.gameManager.head_score_back_height-D.gameManager.screen_padding_left_and_right-D.gameManager.head_menu_back_height,c.roundRect(0,0,D.gameManager.head_score_back_width,D.gameManager.head_menu_back_height,D.gameManager.common_radius),c.fill(),this.restartNode.width=D.gameManager.head_score_back_width,this.restartNode.height=D.gameManager.head_menu_back_height;var d=this.restartNode.getChildByName("text").getComponent(cc.Label);d.lineHeight=d.node.getContentSize().height/d.node.getContentSize().width*D.gameManager.head_score_back_width*.65,d.fontSize=.9*d.lineHeight},refreshScore:function(e,t){this.currentScoreNode.getChildByName("score").getComponent(cc.Label).string=e,this.greatScoreNode.getChildByName("score").getComponent(cc.Label).string=t}}),cc._RF.pop()},{}],GameManager:[function(e,t,a){"use strict";cc._RF.push(t,"51cf0gCSC5FCJKk5k/cotbV","GameManager");var i=cc.winSize;cc.Class({extends:cc.Component,properties:{backgroundNode:{default:null,type:cc.Node},containerNode:{default:null,type:cc.Node},gameOverLabel:{default:null,type:cc.Label},popupWindowNode:{default:null,type:cc.Node}},onLoad:function(){D.gameManager=this,this.initBackground(),this.initParam(),this.containerManager=this.containerNode.getComponent("ContainerManager"),this.containerManager.init(4,4),this.current_score=cc.sys.localStorage.getItem("score"),this.current_score=this.current_score?parseInt(this.current_score):0,this.great_score=cc.sys.localStorage.getItem("greatScore"),this.great_score=this.great_score?parseInt(this.great_score):0,this.refreshScore(0)},start:function(){},update:function(e){},initBackground:function(){var e=this.backgroundNode.getComponent(cc.Graphics);e.rect(0,0,i.width,i.height),e.fill()},initParam:function(){this.screen_padding_left_and_right=.1*i.width/2,this.board_size=i.width-2*this.screen_padding_left_and_right,this.board_line_width=this.board_size/4*.06,this.board_item_size=(this.board_size-5*this.board_line_width)/4,this.screen_padding_top=this.board_item_size/3,this.head_2048_width=(this.board_size-2*this.screen_padding_left_and_right)/5*2,this.head_height=this.head_2048_width,this.head_score_back_width=(this.board_size-2*this.screen_padding_left_and_right)/5*1.5,this.head_score_back_height=(this.head_height-this.screen_padding_left_and_right)/3*2,this.head_menu_back_height=(this.head_height-this.screen_padding_left_and_right)/3,this.board_margin_top=1.5*this.screen_padding_left_and_right,this.board_start_x=this.screen_padding_left_and_right,this.board_start_y=i.height-this.screen_padding_top-this.head_height-this.board_margin_top-this.board_size,this.common_radius=.1*this.board_item_size/1.5},refreshScore:function(e){this.current_score+=e,this.great_score=this.current_score>this.great_score?this.current_score:this.great_score,this.containerManager.refreshScore(this.current_score,this.great_score),this.saveScore()},showGameOver:function(){this.gameOverLabel.lineHeight=this.head_menu_back_height,this.gameOverLabel.fontSize=this.head_menu_back_height,this.gameOverLabel.node.active=!0;var e=cc.callFunc(function(e){cc.sys.localStorage.removeItem("score"),cc.sys.localStorage.removeItem("board"),this.popupWindowNode.getComponent("PopupWindowManager").show()},this);this.gameOverLabel.node.runAction(cc.sequence(cc.scaleTo(.4,1.05).easing(cc.easeCubicActionOut()),cc.scaleTo(.4,.9).easing(cc.easeCubicActionIn()),cc.repeat(cc.sequence(cc.scaleTo(.2,1).easing(cc.easeCubicActionOut()),cc.scaleTo(.2,.95).easing(cc.easeCubicActionIn())),2),e))},saveScore:function(){cc.sys.localStorage.setItem("score",this.current_score),cc.sys.localStorage.setItem("greatScore",this.great_score)}}),cc._RF.pop()},{}],Globals:[function(e,t,a){"use strict";cc._RF.push(t,"99028oVBetMTrCRcMJduUq5","Globals"),window.D={gameManager:null,containerManager:null,preActions:[],actionEndCallback:null,isCanListenActions:!1,canTouch:!0},cc._RF.pop()},{}],PopupWindowManager:[function(e,t,a){"use strict";cc._RF.push(t,"a7f0fHZf7BFVI4/gogF3mC6","PopupWindowManager");var i=cc.winSize;cc.Class({extends:cc.Component,properties:{descLabel:{default:null,type:cc.Label},scoreLabel:{default:null,type:cc.Label},restartNode:{default:null,type:cc.Node},greatScoreLabel:{default:null,type:cc.Label},cancelNode:{default:null,type:cc.Node}},onLoad:function(){var e=this;this.graphics=this.getComponent(cc.Graphics),this.initGameOverPop(),this.node.on(cc.Node.EventType.TOUCH_START,function(e){console.log("\u906e\u7f69\u6355\u83b7\u89e6\u6478"),e.stopPropagation()},this),this.restartNode.on(cc.Node.EventType.TOUCH_START,function(){cc.sys.localStorage.removeItem("score"),cc.sys.localStorage.removeItem("board"),cc.director.loadScene("Game"),D.canTouch=!0},this),this.restartNode.on(cc.Node.EventType.TOUCH_MOVE,function(){e.restartNode.opacity=200}),this.restartNode.on(cc.Node.EventType.TOUCH_END,function(){e.restartNode.opacity=250}),this.restartNode.on(cc.Node.EventType.TOUCH_CANCEL,function(){e.restartNode.opacity=250}),this.cancelNode.on(cc.Node.EventType.TOUCH_START,function(){e.node.active=!1},this)},start:function(){},update:function(e){this.scoreLabel.node.width>.9*this.backWidth&&(this.scoreLabel.lineHeight=this.scoreLabel.node.getContentSize().height/this.scoreLabel.node.getContentSize().width*this.backWidth*.9,this.scoreLabel.fontSize=this.scoreLabel.lineHeight),this.greatScoreLabel.node.width>.9*this.backWidth&&(this.greatScoreLabel.lineHeight=this.greatScoreLabel.node.getContentSize().height/this.greatScoreLabel.node.getContentSize().width*this.backWidth*.9,this.greatScoreLabel.fontSize=this.greatScoreLabel.lineHeight)},initGameOverPop:function(){this.graphics.fillColor=cc.Color.BLACK.setA(200),this.graphics.rect(0,0,i.width,i.height),this.graphics.fill();var e=[D.gameManager.head_menu_back_height/2,D.gameManager.head_menu_back_height],t=D.gameManager.head_menu_back_height/3*2,a=1.5*D.gameManager.head_menu_back_height,o=a/2,r=3*D.gameManager.head_menu_back_height,n=4.5*D.gameManager.head_menu_back_height,s=.7*D.gameManager.head_menu_back_height,h=1.6*D.gameManager.head_menu_back_height,c=.5*D.gameManager.head_menu_back_height,d=.4*D.gameManager.head_menu_back_height,g=i.width-4*D.gameManager.head_menu_back_height;this.backWidth=g;var _=h+2*e[1]+r+a+o+t+c+d,l=(i.width-g)/2,b=(i.height-_)/2,m=.5*D.gameManager.head_menu_back_height;this.graphics.fillColor=cc.Color.WHITE,this.graphics.roundRect(l,b,g,_,m),this.graphics.fill(),this.descLabel.fontSize=t,this.descLabel.lineHeight=t,this.descLabel.node.y=b+_-e[1]-t/2,this.scoreLabel.fontSize=a,this.scoreLabel.lineHeight=a,this.scoreLabel.node.y=b+_-e[1]-t-o-a/2,this.restartNode.y=b+e[1]+h/2+c+d;var u=this.restartNode.getComponent(cc.Graphics);u.roundRect(-n/2,-h/2,n,h,h/2),u.fill(),this.restartNode.width=n,this.restartNode.height=h;var p=this.restartNode.getChildByName("text").getComponent(cc.Label);p.fontSize=s,p.lineHeight=s,this.greatScoreLabel.fontSize=d,this.greatScoreLabel.lineHeight=d,this.greatScoreLabel.node.y=b+e[1]+d/2,this.cancelNode.y=b-e[1],this.cancelNode.width=D.gameManager.head_menu_back_height,this.cancelNode.height=D.gameManager.head_menu_back_height},show:function(){this.node.active=!0,this.scoreLabel.string=D.gameManager.current_score,this.greatScoreLabel.string="\u5386\u53f2\u6700\u9ad8\u5f97\u5206\uff1a"+D.gameManager.great_score}}),cc._RF.pop()},{}]},{},["BoardItemManager","BoardManager","ContainerManager","GameManager","Globals","PopupWindowManager"]);